FROM microsoft/dotnet:2.0.0-sdk-jessie

RUN git clone https://github.com/stratisproject/StratisBitcoinFullNode.git \
    && cd /StratisBitcoinFullNode/src/Stratis.StratisD \
    && dotnet restore \
	&& dotnet build
	
VOLUME /root/.stratisbitcoin

WORKDIR /StratisBitcoinFullNode/src/Stratis.StratisD

COPY stratis.conf.docker /root/.stratisnode/stratis/StratisTest/stratis.conf

EXPOSE 18444 18442 26174 26178 37220

CMD ["dotnet", "run", "stratis", "-testnet"]
